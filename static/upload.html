<html lang="en-US">
<head>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=upload" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=check" />
    <title>ZPI</title>
</head>
<body>
<div class="main-container">
    <img id="current-pfp" src="/image/{{user_id}}"  alt="Current Pfp"/>
    <h1>{{username}}</h1>
    <div id="submit-box">

        <img id="image_file" src="https://placehold.co/200x200" alt="Pfp Preview">

        <form action="/image" method="post" enctype="multipart/form-data">
        <div id="button-box">
            <input id="file-selector" type='file' name="image_file" accept="image/jpeg" />
            <label class="btn btn-secondary" for="file-selector"><span class="material-symbols-outlined">upload</span>Change Picture</label>
            <button type="submit" value="Upload" class="btn btn-primary"><span class="material-symbols-outlined">
                check</span>Confirm
            </button>
        </div>
        </form>

    </div>
</div>
</body>

<script>
    var image,
        inputs,
        readURL = function () {
            if (this.files && this.files[0]) {
                var input = this;
                var reader = new FileReader();
                reader.onload = function (e) {
                    image = document.querySelector('#' + input.name);
                    image.src = e.target.result;
                };
                reader.readAsDataURL(this.files[0]);
            }
        }
    inputs = document.querySelectorAll('input[type=file]');
    for(var i = 0, len = inputs.length; i < len; i++){
        inputs[i].onchange = readURL;
    }
</script>
</html>
<style>
    body {
        font-family: sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
    }
    h1 {
        font-size: 4em;
        margin: 2px;
    }
    form {
        margin: 0;
    }
    .main-container {
        flex-direction: column;
        display: flex;
        align-items: center;
    }
    #current-pfp {
        width: 25vmin;
        height: 25vmin;
        border-radius: 1em;
    }
    #file-selector {
        opacity: 0;
        width: 0.1px;
        height: 0.1px;
    }
    .btn {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        background-color: #ff7f00;
        border-color: #ff7f00;
        border-style: solid;
        border-width: 0.5em;
        width: 20vmin;
        border-radius: 1em;
        height: 6vmin;
        margin: 0.4vmin;
    }
    .btn-secondary {
        background-color: #ff7f0066;
    }
    .btn-primary {
        width: 21.5vmin;
        height: 7vmin;
    }

    #image_file {
        width: 15vmin;
        height: 15vmin;
        border-radius: 0.5em;
        margin-right: 1em;
    }
    #submit-box {
        margin-top: 5vmin;
        display: flex;
        align-items: center;
    }

    .material-symbols-outlined {
        padding-right: 2px;
        font-variation-settings:
                'FILL' 0,
                'wght' 400,
                'GRAD' 0,
                'opsz' 24
    }
</style>
